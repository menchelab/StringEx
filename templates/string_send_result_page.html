<!DOCTYPE html>
<html>

<head>
    <!--  -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/SwagStyle.css') }}">


    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- SocketIo -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>

    <script type="text/javascript" src="{{ url_for('static', filename='js/UI_Module_Config.js') }}"></script>
    <script src="{{ url_for('static', filename='js/connect_WebUI.js') }}"></script>
    <script src="{{ url_for('static', filename='js/connect_socketIO_main.js') }}"></script>

    <!-- Swag scripts -->
    <script src="{{ url_for('static', filename='js/mc_UI_Elements.js') }}"></script>
    <!-- StringEx Style -->
    <link href="{{ url_for('StringEx.static', filename='css/StringStyle.css') }}" rel="stylesheet" />
    <!-- StringEx scripts -->
    <script>
    var uid = makeid(10);
    </script>
    <script src="{{ url_for('StringEx.static', filename='js/stringUI_Elements.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

    <style>
        .frameBox.fancy {

            padding: 0px;

            max-width: 100%;
        }

        html {
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background:url("{{ url_for('static', filename='css/images/lineglow3.gif')}}");
            background-size: cover;
            background-position: center;
            margin: 0px;
        }

        body {
            background: transparent;
        }
    </style>
    <title>Project Created</title>
</head>

<body>
    {% if "UnrealEngine" not in request.user_agent|string%}
    {% include "NavBar.html" %}
    {% endif %}
    <div class="frameBox fancy twelve" style="padding:0px;border:none">
        <h2 style="margin: 2vh;margin-left:0;font-size: 5vh;color:rgba(42, 113, 148,0.3);border:8px solid transparent">
            Project Created
        </h2>

        <h4 class="six columns" style="font-size:80%"> You project <u>{{project}}</u> was successfully created.</h4>

        <div class="twelve columns frameBox">
            <div class="twelve columns">
                <style>
                    .stringexREP {
                        margin-left: 5%;
                        margin-right: 5%;
                        margin-bottom: 3%;
                        margin-top: 3%
                    }
                </style>
                <div class="five columns stringexREP">
                    <div class="twelve columns strex_updateMessage" id="stringexREPM">Opened project preview in a new
                        tab.
                    </div>
                    <input type="button" id='string_ex_result_previewButton' class="swagTextButton twelve columns"
                        value="Preview" title="Click to preview the project in Browser.">
                </div>
                <div class="five columns stringexREP" style=>
                    <div class="twelve columns strex_updateMessage" id="stringexROBM">
                        Opened project running VR sessions.</div>
                    <input type="button" id='string_ex_result_OpenButton' class="swagTextButton twelve columns"
                        value="Open" title="Click to open the project on the VRNetzer platform.">
                </div>
            </div>
        </div>
        <script>
            $('#string_ex_result_previewButton').on("click", function() {
                $('#stringexREPM').css('opacity', '1');
                setTimeout(function() {
                    $('#stringexREPM').css('opacity', '0');
                }, 2000);
                var win = window.open("/StringEx/preview?project={{project}}", "_blank");
            });

            $('#string_ex_result_OpenButton').on("click", function() {
                $('#stringexROBM').css('opacity', '1');
                setTimeout(function() {
                    $('#stringexROBM').css('opacity', '0');
                }, 2000);
                console.log("ex", {id:"projects",opt:"{{ project }}",fn:"sel"})
                socket.emit('ex', { id: "projects", opt: "{{ project }}", fn: "sel" });
            });
        </script>
        <style>
            .stringexClickLayout {
                font-size: 60%;
                cursor: pointer;
            }
        </style>
        <div class="frameBox twelve columns" id="texture_framebox">
            <div class=" six columns" style="margin-left:9%">
                <h4 style="padding-left:2%">Node Textures</h4>
                <ul style="list-style-type: none;padding-left:6%" ,id="node_textures">
                    {% for x in pfile["layouts"] %}

                    <li>
                        <h4 class="stringexClickLayout" id="{{x}}" type="Node">
                            {{x.strip("XYZ")}} </h4>
                    </li>

                    {% endfor %}
                </ul>
            </div>
            <div class="five columns" id="link_textures">
                <h4 style="padding:2%">Link Textures</h4>
                <ul style="list-style-type: none;padding-left:6%" id="link_textures">
                    {% for x in pfile["links"]%}
                    <li>
                        <h4 class="stringexClickLayout" id="{{x}}" type="Link">
                            {{x.strip("XYZ")}}</h4>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <script>
            $(".stringexClickLayout").click(function() {
                var id = this.id;
                var type = this.getAttribute("type");
                if (type.includes("Node")) {
                    socket.emit('ex', { id: "layouts", opt: id, fn: "sel" });
                    socket.emit('ex', { id: "layoutsRGB", opt: id.replace("XYZ", "RGB"), fn: "sel" });
                } else {
                    socket.emit('ex', { id: "linkcolors", opt: id.replace("XYZ", "RGB"), fn: "sel" });
                    socket.emit('ex', { id: "links", opt: id, fn: "sel" });

                }

            });

        </script>
    </div>

</body>

</html>